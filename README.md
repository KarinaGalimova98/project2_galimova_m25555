## Установка

```bash
poetry install
# или
make install
```


## Запуск

```bash
poetry run database
# или
database     
# или
make project  
```


# Primitive DB

Primitive DB — это учебный консольный проект, представляющий собой упрощённую реализацию базовой системы управления базами данных (СУБД). Приложение работает полностью локально и позволяет создавать таблицы, хранить данные в формате JSON, выполнять CRUD-операции, обрабатывать пользовательские команды.

Проект создан без использования классов — вся логика построена на функциях, декораторах, замыканиях и модульной архитектуре. Такая структура подчёркивает функциональный подход к разработке и позволяет глубже понять принципы работы с файлами, обработкой пользовательского ввода и хранением структурированных данных.

## Управление таблицами

Доступные команды:

- `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ..` — создать таблицу  
- `list_tables` — показать список всех таблиц  
- `drop_table <имя_таблицы>` — удалить таблицу  
- `help` — показать справочную информацию  
- `exit` — выход из программы  

Пример:

```text
$ database

***База данных***

***Процесс работы с таблицей***
Функции:
<command> create_table <имя_таблицы> <столбец1:тип> .. - создать таблицу
<command> list_tables - показать список всех таблиц
<command> drop_table <имя_таблицы> - удалить таблицу

Общие команды:
<command> exit - выход из программы
<command> help - справочная информация

Введите команду: create_table users name:str age:int is_active:bool
Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool

Введите команду: list_tables
- users

Введите команду: drop_table users
Таблица "users" успешно удалена.
```

## CRUD-операции

Доступные команды:

- `insert into <имя_таблицы> values (<значение1>, <значение2>, ...)` — создать запись
- `select from <имя_таблицы>` — прочитать все записи
- `select from <имя_таблицы> where <столбец> = <значение>` — прочитать записи по условию
- `update <имя_таблицы> set <столбец> = <новое_значение> where <столбец_условия> = <значение>` — обновить запись
- `delete from <имя_таблицы> where <столбец> = <значение>` — удалить запись
- `info <имя_таблицы>` — вывести информацию о таблице


### Демонстрация CRUD-операций 



[![asciicast](https://asciinema.org/a/o9p3oAusHgH7kkeIvJDJMjD2S.svg)](https://asciinema.org/a/o9p3oAusHgH7kkeIvJDJMjD2S)


## Обработка ошибок и декораторы

В проекте используются декораторы:

- `@handle_db_errors` — единая обработка ошибок (`KeyError`, `ValueError`,
  `FileNotFoundError` и др.).
- `@confirm_action("…")` — запрашивает подтверждение перед опасными операциями
  (удаление таблицы, удаление записей).
- `@log_time` — выводит время выполнения функции.
- Кэширование результатов `select` реализовано через замыкание `create_cacher()`.

### Финальная демонстрация работы проекта (decorators)

[![asciicast](https://asciinema.org/a/WLDayTlH7gOVfKGggnTzIi5tW.svg)](https://asciinema.org/a/WLDayTlH7gOVfKGggnTzIi5tW)

